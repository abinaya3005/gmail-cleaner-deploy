<!DOCTYPE html>
<html>
<head>
    <title>Gmail Cleaner</title>
</head>
<body>
    <h2>ðŸ“§ Gmail Cleaner</h2>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul>
        {% for category, message in messages %}
          <li>{{ message }}</li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    {% if authorized %}
        <p>âœ… Connected to Gmail!</p>
        <form method="POST" action="{{ url_for('delete_emails') }}">
            <label>Choose category to delete:</label>
            <select name="category">
                <option value="">Select</option>
                <option value="unread">Unread</option>
                <option value="flipkart">Flipkart</option>
                <option value="amazon">Amazon</option>
                <option value="gpay">GPay</option>
                <option value="custom">Custom</option>
            </select>
            <br><br>
            <label>Enter custom query if any:</label>
            <input type="text" name="custom_email" placeholder="someone@gmail.com">
            <br><br>
            <button type="submit">Delete Emails</button>
        </form>
        <br>
        <a href="{{ url_for('logout') }}">Logout</a>
    {% else %}
        <p>ðŸ”’ Not connected</p>
        <a href="{{ url_for('authorize') }}">Connect Gmail</a>
    {% endif %}
</body>
</html>
