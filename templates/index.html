<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gmail Cleaner</title>
</head>
<body>
    <h2>Gmail Cleaner</h2>

    {% if connected %}
        <p>âœ… Connected to Gmail!</p>
        <form method="POST" action="{{ url_for('delete_emails') }}">
            <label for="category">Choose category to delete:</label>
            <select name="category" id="category">
                <option value="unread">Unread</option>
                <option value="flipkart">Flipkart</option>
                <option value="amazon">Amazon</option>
                <option value="gpay">GPay</option>
                <option value="custom">Custom</option>
            </select>
            <input type="text" name="custom_email" placeholder="Enter custom query if any">
            <button type="submit">Delete Emails</button>
        </form>
        <br>
        <a href="{{ url_for('logout') }}">Logout</a>
    {% else %}
        <p>ðŸ”’ Not connected</p>
        <a href="{{ url_for('authorize') }}">Connect Gmail</a>
    {% endif %}

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul>
        {% for category, message in messages %}
          <li><strong>{{ category }}:</strong> {{ message }}</li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
</body>
</html>
